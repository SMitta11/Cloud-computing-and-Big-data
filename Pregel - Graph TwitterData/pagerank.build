#!/bin/bash

rm -rf pagerank.jar classes

module load cpu/0.15.4 gcc/7.5.0 openjdk hadoop/3.2.2 spark
SW=/expanse/lustre/projects/uot189/fegaras
export SCALA_HOME=$SW/scala-2.12.3
PATH="$SCALA_HOME/bin:$PATH"

JARS=.
for I in `ls $SPARK_HOME/jars/*.jar -I *unsafe*`; do
    JARS=$JARS:$I
done

mkdir -p classes
scalac -d classes -cp classes:${JARS} src/main/scala/PageRank.scala
jar cf pagerank.jar -C classes .

echo "Compilation completed."
